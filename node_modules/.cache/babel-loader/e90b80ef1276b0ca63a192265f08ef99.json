{"ast":null,"code":"var _jsxFileName = \"/home/carrocinha/codenation/fashionista/src/pages/ProductDetails/ProductDetails.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { closeDrawerAction } from \"../../store/actions/drawerActions\";\nimport { getProducts } from \"../../store/actions/productsActions\";\nimport { addProductToCart } from \"../../store/actions/cartActions\";\nimport { setProductToBuy, setSizeProductToBuy } from \"../../store/actions/productActions\";\nimport './ProductDetails.css';\n\nconst ProductDetails = () => {\n  const {\n    products\n  } = useSelector(store => store.productsReducer);\n  const productDetails = useSelector(state => state.productReducer);\n  const product = productDetails.product_info;\n  const dispatch = useDispatch();\n  const {\n    code_color\n  } = useParams();\n  const productSize = product.size || 'U';\n  useEffect(() => {\n    async function init() {\n      // Fechar o drawer antes de tudo\n      await dispatch(closeDrawerAction);\n      var productJSON = product || localStorage.getItem('@fashionista/product');\n\n      if (product !== null) {\n        await dispatch(setProductToBuy(product));\n        return;\n      }\n\n      if (productJSON === null) {\n        // Se a store estiver vazia, faça uma nova requisição\n        if (products.length === 0) {\n          await getProducts(dispatch);\n        }\n\n        const productAux = await products.find(p => p.code_color === code_color);\n        await dispatch(setProductToBuy(productAux));\n        var productString = JSON.stringify(productAux); //converter para salvar\n\n        console.log(\"string\" + productString);\n        localStorage.setItem('@fashionista/product', productString); // armazenar\n\n        return;\n      } else {\n        productJSON = JSON.parse(productJSON);\n        await dispatch(setProductToBuy(productJSON));\n      }\n\n      await dispatch(setProductToBuy(productJSON));\n    }\n\n    init();\n  }, []);\n\n  function handleAddProductToCart() {\n    var stringProduct = JSON.stringify(product); // remover campo sizes\n\n    stringProduct = stringProduct.replace('\\s*\\\"sizes\\\" *: *(\\\"(.*?)\\\"(,|\\s|)|\\s*\\{(.*?)\\}(,|\\s|))');\n    var cartProduct = JSON.parse(stringProduct); // adicionar novo campo 'size'\n\n    cartProduct = { ...cartProduct,\n      size: productSize,\n      quantity: 0\n    };\n    dispatch(addProductToCart(cartProduct));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"figure\", {\n    className: \"product__details__image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: product.image,\n    alt: \"Produto VESTIDO TRANSPASSE BOW\",\n    title: \"VESTIDO TRANSPASSE BOW\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__details__content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"product__details__name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, product.name), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__details__pricing\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"product__details__price product__details__price--to\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, product.regular_price), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"product__details__price product__details__price--installments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, \" em at\\xE9 \", product.installments)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__details__sizes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, \"Escolha o tamanho:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__details__btnGroup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, product.sizes && product.sizes.map((s, index) => /*#__PURE__*/React.createElement(\"button\", {\n    key: index,\n    onClick: () => dispatch(setSizeProductToBuy(s.size)),\n    className: `${productSize === s.size ? 'onClick' : 'sizeButton'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 19\n    }\n  }, s.size)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__details__actions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"product__details__addToCart\",\n    onClick: () => handleAddProductToCart(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, \"Adicionar ao carrinho\")))));\n};\n\nexport default ProductDetails;","map":{"version":3,"sources":["/home/carrocinha/codenation/fashionista/src/pages/ProductDetails/ProductDetails.jsx"],"names":["React","useState","useEffect","useParams","useSelector","useDispatch","closeDrawerAction","getProducts","addProductToCart","setProductToBuy","setSizeProductToBuy","ProductDetails","products","store","productsReducer","productDetails","state","productReducer","product","product_info","dispatch","code_color","productSize","size","init","productJSON","localStorage","getItem","length","productAux","find","p","productString","JSON","stringify","console","log","setItem","parse","handleAddProductToCart","stringProduct","replace","cartProduct","quantity","image","name","regular_price","installments","sizes","map","s","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { closeDrawerAction } from \"../../store/actions/drawerActions\";\nimport { getProducts } from \"../../store/actions/productsActions\";\nimport { addProductToCart } from \"../../store/actions/cartActions\";\nimport { setProductToBuy, setSizeProductToBuy } from \"../../store/actions/productActions\";\n\nimport './ProductDetails.css';\n\n\nconst ProductDetails = () => {\n\n  const { products } = useSelector(store => store.productsReducer);\n  const productDetails = useSelector(state => state.productReducer);\n  const product = productDetails.product_info;\n\n  const dispatch = useDispatch();\n  const { code_color } = useParams();\n\n  const productSize = product.size || 'U';\n\n\n  useEffect(() => {\n\n    async function init() {\n      // Fechar o drawer antes de tudo\n      await dispatch(closeDrawerAction);\n\n      var productJSON = product || localStorage.getItem('@fashionista/product');\n\n      if (product !== null) {\n        await dispatch(setProductToBuy(product));\n        return;\n      }\n\n      if (productJSON === null) {\n        // Se a store estiver vazia, faça uma nova requisição\n        if (products.length === 0) {\n          await getProducts(dispatch);\n        }\n\n        const productAux = await products.find((p) => p.code_color === code_color);\n\n        await dispatch(setProductToBuy(productAux));\n\n        var productString = JSON.stringify(productAux); //converter para salvar\n        console.log(\"string\" + productString);\n        localStorage.setItem('@fashionista/product', productString); // armazenar\n\n        return;\n      }\n      else {\n        productJSON = JSON.parse(productJSON);\n        await dispatch(setProductToBuy(productJSON));\n      }\n\n      await dispatch(setProductToBuy(productJSON));\n\n    }\n    init();\n  }, []);\n\n  function handleAddProductToCart() {\n    var stringProduct = JSON.stringify(product);\n\n    // remover campo sizes\n    stringProduct = stringProduct\n      .replace('\\s*\\\"sizes\\\" *: *(\\\"(.*?)\\\"(,|\\s|)|\\s*\\{(.*?)\\}(,|\\s|))');\n\n    var cartProduct = (JSON.parse(stringProduct));\n\n    // adicionar novo campo 'size'\n    cartProduct = { ...cartProduct, size: productSize, quantity: 0 };\n\n    dispatch(addProductToCart(cartProduct));\n  }\n\n\n  return (\n    <div className=\"app__container\">\n      <div className=\"product__details\">\n        <figure className=\"product__details__image\">\n          <img\n            src={product.image}\n            alt=\"Produto VESTIDO TRANSPASSE BOW\"\n            title=\"VESTIDO TRANSPASSE BOW\"\n          />\n        </figure>\n\n        <div className=\"product__details__content\">\n          <h3 className=\"product__details__name\">{product.name}</h3>\n\n          <div className=\"product__details__pricing\">\n            <span className=\"product__details__price product__details__price--to\">{product.regular_price}</span>\n            <span className=\"product__details__price product__details__price--installments\"> em até {product.installments}</span>\n          </div>\n\n          <div className=\"product__details__sizes\">\n            <p>Escolha o tamanho:</p>\n            <div className=\"product__details__btnGroup\">\n              {\n                product.sizes &&\n                product.sizes.map((s, index) =>\n                  <button\n                    key={index}\n                    onClick={() => dispatch(setSizeProductToBuy(s.size))}\n                    className={`${productSize === s.size ? 'onClick' : 'sizeButton'}`}\n                  >\n                    {s.size}\n                  </button>\n                )\n              }\n            </div>\n          </div>\n\n          <div className=\"product__details__actions\">\n            <button className=\"product__details__addToCart\" onClick={() => handleAddProductToCart()}>\n              Adicionar ao carrinho\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\nexport default ProductDetails;\n\n"]},"metadata":{},"sourceType":"module"}