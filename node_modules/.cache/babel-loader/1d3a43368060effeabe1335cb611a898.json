{"ast":null,"code":"var _jsxFileName = \"/home/carrocinha/codenation/fashionista/src/pages/ProductDetails/ProductDetails.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { closeDrawerAction } from \"../../store/actions/drawerActions\";\nimport { getProducts } from \"../../store/actions/productsActions\";\nimport SizeButton from \"../../components/SizeButton/SizeButton\";\nimport './ProductDetails.css';\n\nconst ProductDetails = () => {\n  const {\n    products\n  } = useSelector(store => store.productsReducer);\n  const dispatch = useDispatch();\n  const [product, setProduct] = useState({});\n  const [productSize, setProductSize] = useState('');\n  const {\n    code_color\n  } = useParams();\n  useEffect(() => {\n    // Fechar o drawer antes de tudo\n    dispatch(closeDrawerAction);\n\n    if (products.length === 0 || product === null) {\n      var productJSON = localStorage.getItem('@fashionista/product'); // Se a store estiver vazia, faça uma nova requisição\n\n      if (productJSON === null) getProducts(dispatch);\n      setProduct(JSON.parse(productJSON)); // convertendo para JSON\n\n      return;\n    }\n\n    let productAux = products.find(product => product.code_color === code_color);\n    setProduct(productAux);\n    var productString = JSON.stringify(productAux); //converter para salvar\n\n    localStorage.setItem('@fashionista/product', productString);\n  });\n\n  function handleAddProductToCart() {\n    var stringProduct = JSON.stringify(product); // remover campo sizes\n\n    stringProduct = stringProduct.replace('\\s*\\\"sizes\\\" *: *(\\\"(.*?)\\\"(,|\\s|)|\\s*\\{(.*?)\\}(,|\\s|))');\n    var cartProduct = JSON.parse(stringProduct); // adicionar novo campo 'size'\n\n    cartProduct = { ...cartProduct,\n      size: productSize\n    };\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"figure\", {\n    className: \"product__details__image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: product.image,\n    alt: \"Produto VESTIDO TRANSPASSE BOW\",\n    title: \"VESTIDO TRANSPASSE BOW\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__details__content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"product__details__name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, product.name), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__details__pricing\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"product__details__price product__details__price--to\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, product.regular_price), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"product__details__price product__details__price--installments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, \" em at\\xE9 \", product.installments)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__details__sizes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, \"Escolha o tamanho:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__details__btnGroup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, product.sizes && product.sizes.map(s => /*#__PURE__*/React.createElement(SizeButton, {\n    key: s.size,\n    size: s.size,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 40\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product__details__actions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"product__details__addToCart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, \"Adicionar ao carrinho\")))));\n};\n\nexport default ProductDetails;","map":{"version":3,"sources":["/home/carrocinha/codenation/fashionista/src/pages/ProductDetails/ProductDetails.jsx"],"names":["React","useState","useEffect","useParams","useSelector","useDispatch","closeDrawerAction","getProducts","SizeButton","ProductDetails","products","store","productsReducer","dispatch","product","setProduct","productSize","setProductSize","code_color","length","productJSON","localStorage","getItem","JSON","parse","productAux","find","productString","stringify","setItem","handleAddProductToCart","stringProduct","replace","cartProduct","size","image","name","regular_price","installments","sizes","map","s"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { closeDrawerAction } from \"../../store/actions/drawerActions\";\nimport { getProducts } from \"../../store/actions/productsActions\";\n\nimport SizeButton from \"../../components/SizeButton/SizeButton\";\n\nimport './ProductDetails.css';\n\n\nconst ProductDetails = () => {\n\n  const { products } = useSelector(store => store.productsReducer);\n  const dispatch = useDispatch();\n\n  const [product, setProduct] = useState({});\n  const [productSize, setProductSize] = useState('');\n\n  const { code_color } = useParams();\n\n  useEffect(() => {\n    // Fechar o drawer antes de tudo\n    dispatch(closeDrawerAction);\n\n    if (products.length === 0 || product === null) {\n      var productJSON = localStorage.getItem('@fashionista/product');\n\n      // Se a store estiver vazia, faça uma nova requisição\n      if (productJSON === null) getProducts(dispatch);\n\n      setProduct(JSON.parse(productJSON)); // convertendo para JSON\n      return;\n    }\n    let productAux = products.find((product) => product.code_color === code_color);\n\n    setProduct(productAux);\n    var productString = JSON.stringify(productAux); //converter para salvar\n    localStorage.setItem('@fashionista/product', productString);\n\n  });\n\n  function handleAddProductToCart() {\n    var stringProduct = JSON.stringify(product);\n\n    // remover campo sizes\n    stringProduct = stringProduct\n      .replace('\\s*\\\"sizes\\\" *: *(\\\"(.*?)\\\"(,|\\s|)|\\s*\\{(.*?)\\}(,|\\s|))');\n    var cartProduct = (JSON.parse(stringProduct));\n\n    // adicionar novo campo 'size'\n    cartProduct = { ...cartProduct, size: productSize };\n  }\n\n\n  return (\n    <div className=\"app__container\">\n      <div className=\"product__details\">\n        <figure className=\"product__details__image\">\n          <img\n            src={product.image}\n            alt=\"Produto VESTIDO TRANSPASSE BOW\"\n            title=\"VESTIDO TRANSPASSE BOW\"\n          />\n        </figure>\n\n        <div className=\"product__details__content\">\n          <h3 className=\"product__details__name\">{product.name}</h3>\n\n          <div className=\"product__details__pricing\">\n            <span className=\"product__details__price product__details__price--to\">{product.regular_price}</span>\n            <span className=\"product__details__price product__details__price--installments\"> em até {product.installments}</span>\n          </div>\n\n          <div className=\"product__details__sizes\">\n            <p>Escolha o tamanho:</p>\n            <div className=\"product__details__btnGroup\">\n              {\n                product.sizes &&\n                product.sizes.map(s => <SizeButton key={s.size} size={s.size} />)\n              }\n            </div>\n          </div>\n\n          <div className=\"product__details__actions\">\n            <button className=\"product__details__addToCart\">\n              Adicionar ao carrinho\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\nexport default ProductDetails;\n\n"]},"metadata":{},"sourceType":"module"}